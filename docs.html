<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>RockyJS</title>

    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">
    <h1 id="api-documentation">API Documentation</h1>
<p>This document is split into two major sections:</p>
<ul>
<li><a href="#rockyjs-web-api">RockyJS Web API</a> - The APIs used to create and update an instance of RockyJS on a webpage.</li>
<li><a href="#rockyjs-pebble-api">RockyJS Pebble API</a> - A subset of Pebble&#39;s <a href="https://developer.pebble.com/docs/c">C-style API</a> that can invoked through JavaScript.</li>
</ul>
<h2 id="rockyjs-web-api">RockyJS Web API</h2>
<p>RockyJS exposes a number of helper functions outside Pebble&#39;s C-Style API to help you work with RockyJS in a browser based environment. </p>
<h3 id="rocky-bindcanvas-el-">Rocky.bindCanvas(el)</h3>
<p>The <code>bindCanvas</code> method creates an instance of RockyJS, binds that instance to the supplied canvas element, then returns the instance to be used later in code. </p>
<pre><code class="lang-js">// Create an instance of RockyJS and bind it to a canvas with id=&quot;pebble&quot;
var rocky = Rocky.bindCanvas(document.getElementById(&quot;pebble&quot;));
</code></pre>
<h3 id="rocky-export_global_c_symbols-">rocky.export_global_c_symbols()</h3>
<p>The <code>export_global_c_symbos</code> will pollute the global namespace with the subset of available APIs calls from Pebble&#39;s C-style API. This allows you to invoke (the implemented) functions from Pebble&#39;s C API without having to preface every call with <code>rocky.functionName</code>.</p>
<p>This method should typically not be used if there are multiple instances of RockyJS on the same page. See the two exampls below for </p>
<pre><code>// Calling a C-Style API after rocky.export_global_c_symbols
var rocky = Rocky.bindCanvas(document.getElementById(&quot;pebble&quot;));
rocky.export_global_c_symbols();

rocky.update_proc = function (ctx, bounds) {
    graphics_context_set_stroke_color(ctx, GColorRed);
    graphics_context_set_stroke_width(ctx, 10);
    graphics_draw_line(ctx, [50, 0], [100, 50]);
};
</code></pre><pre><code>// Calling a C-Style API without rocky.export_global_c_symbols
var rocky = Rocky.bindCanvas(document.getElementById(&quot;pebble&quot;));

rocky.update_proc = function (ctx, bounds) {
    rocky.graphics_context_set_stroke_color(ctx, rocky.GColorRed);
    rocky.graphics_context_set_stroke_width(ctx, 10);
    rocky.graphics_draw_line(ctx, [50, 0], [100, 50]);
};
</code></pre><h3 id="rocky-mark_dirty-">rocky.mark_dirty()</h3>
<p>The <code>mark_dirty</code> method indicates to the specified instance of Rocky that <code>rocky.update_proc</code> should be invoked. </p>
<pre><code>var rocky = Rocky.bindCanvas(document.getElementById(&quot;pebble&quot;));

var value = 0;

rocky.update_proc = function(ctx, bounds)  {
    graphics_context_set_stroke_color(ctx, GColorRed);
    graphics_context_set_stroke_width(ctx, 10);
    graphics_draw_line(ctx, [value, 0], [100, value]);
};

// Update value and mark the canvas as dirty 20/sec
setInterval(function() {
    value += 1;
    rocky.mark_dirty();
}, 1000 / 20);
</code></pre><h3 id="rocky-update_proc">rocky.update_proc</h3>
<p>Instances of RockyJS include a property, <code>update_proc</code>, that will be invoked each time the instance is marked dirty with <code>rocky.mark_dirty</code>. The update_proc method should be set to a callback function with parameters: </p>
<ul>
<li>ctx: A JavaScript version of the <a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Context/">GContext</a> object.</li>
<li>bounds: A JavaScript version of the <a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Types/#GRect">GRect</a> object indicating the bounds of the virtual display.</li>
</ul>
<p>See <a href="#rocky-mark_dirty">rocky.mark_dirty</a> for sample usage.</p>
<h2 id="rockyjs-pebble-api">RockyJS Pebble API</h2>
<p>RockyJS currently implements a subset of Pebble&#39;s C-Style API. This section of the document outlines what methods have been implemented, as well as recommendations for how to manage some of the sections of the API that are not implemented.</p>
<h3 id="implemented-apis">Implemented APIs</h3>
<p>The following APIs have already been implemented in RockyJS:</p>
<ul>
<li><a href="https://developer.pebble.com/docs/c/Graphics/">Graphics</a> (partial)<ul>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Types/">Basic Types</a>:<ul>
<li>GColor (partial)</li>
<li>GPoint</li>
<li>GRect</li>
</ul>
</li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Context/">GContext</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Drawing_Primitives/">Drawing Primitives</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Drawing_Text/">Drawing Text</a></li>
</ul>
</li>
</ul>
<h3 id="apis-replaced-with-standard-javascript-apis">APIs replaced with standard JavaScript APIs</h3>
<p>The following APIs have had their functionality replaced with existing JavaScript APIs:</p>
<ul>
<li>Handling Date/Time: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/AccelerometerService/">Accelerometer</a> &amp; <a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/CompassService/">Compass</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Device Motion and Orientation APIs</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/TickTimerService/">Tick Service</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval">setInterval</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Timer/">Timer</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval">setInterval</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout">setTimeout</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Logging/">Logging</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/log">console.log</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Dictation/">Dictation Service</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API">Web Speech API</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Storage/">Persistant Storage</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">localStorage API</a></li>
<li><a href="https://developer.pebble.com/docs/c/User_Interface/Animation/">Animation</a>: <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval">setInterval</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout">setTimeout</a></li>
</ul>
<h3 id="planned-apis">Planned APIs</h3>
<p>The following APIs are on the roadmap for RockyJS, but have not yet been implemented:</p>
<ul>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/AppFocusService/">AppFocus</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/AppMessage/">AppMessage</a> + <a href="https://developer.pebble.com/docs/c/Foundation/Dictionary/">Dictionary</a> - <em>will be replaced with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">WebWorker</a> semantics</em>.</li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/BatteryStateService/">Battery Service</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Types/#gbitmap_get_bytes_per_row">Bitmap</a> / <a href="https://developer.pebble.com/docs/c/Graphics/Graphics_Types/#gbitmap_sequence_create_with_resource">BitmapSequence</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Event_Service/ConnectionService/">ConnectionService</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Draw_Commands/">DrawCommand</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Fonts/">Fonts</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Drawing_Primitives/#graphics_capture_frame_buffer">Frame Buffer</a></li>
<li><a href="https://developer.pebble.com/docs/c/Graphics/Drawing_Paths/#GPath">GPath</a></li>
<li><a href="https://developer.pebble.com/docs/c/User_Interface/Light/">Light</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/WatchInfo/">WatchInfo</a></li>
<li><a href="https://developer.pebble.com/docs/c/User_Interface/Layers/">Layer</a>/<a href="https://developer.pebble.com/docs/c/User_Interface/Window/">Window</a>/<a href="https://developer.pebble.com/docs/c/User_Interface/Window_Stack/">WindowStack</a></li>
<li><a href="https://developer.pebble.com/docs/c/User_Interface/Vibes/">Vibes</a></li>
</ul>
<h3 id="unplanned-apis">Unplanned APIs</h3>
<p>The following APIs are not currently on the roadmap for RockyJS:</p>
<ul>
<li><a href="https://developer.pebble.com/docs/c/Worker/">Worker</a></li>
<li><a href="https://developer.pebble.com/docs/c/User_Interface/Clicks/">Clicks</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/DataLogging/">DataLogging</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Memory_Management/">Memory Management / Heap</a></li>
<li><a href="https://developer.pebble.com/docs/c/Smartstrap/">SmartStraps</a></li>
<li><a href="https://developer.pebble.com/docs/c/Foundation/Wakeup/">Wakeup</a> / <a href="https://developer.pebble.com/docs/c/Foundation/Launch_Reason/">Launch Reason</a></li>
</ul>

</div>
</body>
</html>

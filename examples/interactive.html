<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Pebble Interactive Example</title>

    <!-- build:js ../rocky.js -->
    <script src="../src/html-binding.js"></script>
    <script src="../src/functions-manual.js"></script>
    <script src="../src/functions-generated.js"></script>
    <script src="../src/transpiled.js"></script>
    <!-- /build -->
    <link rel="stylesheet" href="css/style.css">

	<!-- Tangle -->

	<script type="text/javascript" src="js/tangle-rocky.js"></script>
	<script type="text/javascript" src="TangleKit/Tangle.js"></script>

	<!-- TangleKit (optional) -->
	<link rel="stylesheet" href="TangleKit/TangleKit.css" type="text/css">
	<script type="text/javascript" src="TangleKit/mootools.js"></script>
	<script type="text/javascript" src="TangleKit/sprintf.js"></script>
	<script type="text/javascript" src="TangleKit/BVTouchable.js"></script>
	<script type="text/javascript" src="TangleKit/TangleKit.js"></script>
</head>

<body>
    <div id="fill_radial">
    <canvas width="288" height="336"></canvas>
	<pre>
const GRect rect = GRect(<span
            data-var="rect_x" data-init="10" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_y" data-init="12" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_w" data-init="90" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_h" data-init="125" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>);

if (<span class="TKSelect TKSwitch" data-var="debug_mode" data-init="1"><span>false</span><span>true</span></span>) {
  graphics_set_stroke_color(ctx, GColorGray);
  graphics_draw_rect(ctx, rect);
}

graphics_fill_radial(
  ctx, rect,
  <span class="TKSelect TKSwitch" data-var="oval_scale_mode" data-init="0"><span>GOvalScaleModeFitCircle</span><span>GOvalScaleModeFillCircle</span></span>,
  <span data-var="inset" data-init="10" class="TKAdjustableNumber" data-min="-100" data-max="500" data-step="2"></span>, /* inset */
  DEG_TO_TRIGANGLE(<span data-var="angle_start" data-init="142" class="TKAdjustableNumber" data-min="-100" data-max="500" data-step="2"></span>), /* angle_start */
  DEG_TO_TRIGANGLE(<span data-var="angle_end" data-init="402" class="TKAdjustableNumber" data-min="-100" data-max="500" data-step="2"></span>)  /* angle_end */
);
</pre>
    <script type="text/javascript">
        Rocky.bindTangle({
            update_proc: function(rocky, tangle, ctx, bounds) {
                var rect = rocky.GRect(
                        tangle.getValue("rect_x"),
                        tangle.getValue("rect_y"),
                        tangle.getValue("rect_w"),
                        tangle.getValue("rect_h")
                );
                if (tangle.getValue("debug_mode")) {
                    rocky.graphics_context_set_stroke_color(ctx, rocky.GColorLightGray);
                    rocky.graphics_draw_rect(ctx, rect);

                }

                rocky.graphics_fill_radial(
                        ctx, rect,
                        tangle.getValue("oval_scale_mode"),
                        tangle.getValue("inset"), /* inset */
                        rocky.DEG_TO_TRIGANGLE(tangle.getValue("angle_start")), /* angle_start */
                        rocky.DEG_TO_TRIGANGLE(tangle.getValue("angle_end"))  /* angle_end */
                );
            }
        });
    </script>
    </div>


    <div id="draw_arc">
        <canvas width="288" height="336"></canvas>
	<pre>
const GRect rect = GRect(<span
            data-var="rect_x" data-init="10" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_y" data-init="12" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_w" data-init="90" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>, <span
            data-var="rect_h" data-init="125" class="TKAdjustableNumber" data-min="-50" data-max="200"></span>);
if (<span class="TKSelect TKSwitch" data-var="debug_mode" data-init="1"><span>false</span><span>true</span></span>) {
  graphics_set_stroke_color(ctx, GColorGray);
  graphics_draw_rect(ctx, rect);
  graphics_set_stroke_color(ctx, GColorBlack);
}

graphics_context_set_stroke_width(ctx, <span data-var="stroke_width" data-init="3" class="TKAdjustableNumber" data-min="-0" data-max="100" data-step="1"></span>);
graphics_draw_arc(
  ctx, rect,
  <span class="TKSelect TKSwitch" data-var="oval_scale_mode" data-init="0"><span>GOvalScaleModeFitCircle</span><span>GOvalScaleModeFillCircle</span></span>,
  DEG_TO_TRIGANGLE(<span data-var="angle_start" data-init="142" class="TKAdjustableNumber" data-min="-100" data-max="500" data-step="2"></span>), /* angle_start */
  DEG_TO_TRIGANGLE(<span data-var="angle_end" data-init="402" class="TKAdjustableNumber" data-min="-100" data-max="500" data-step="2"></span>)  /* angle_end */
);
</pre>
        <script type="text/javascript">
            Rocky.bindTangle({
                update_proc: function(rocky, tangle, ctx, bounds) {
                    var rect = rocky.GRect(
                            tangle.getValue("rect_x"),
                            tangle.getValue("rect_y"),
                            tangle.getValue("rect_w"),
                            tangle.getValue("rect_h")
                    );
                    if (tangle.getValue("debug_mode")) {
                        rocky.graphics_context_set_stroke_color(ctx, rocky.GColorLightGray);
                        rocky.graphics_draw_rect(ctx, rect);
                        rocky.graphics_context_set_stroke_color(ctx, rocky.GColorBlack);
                    }

                    rocky.graphics_context_set_stroke_width(ctx, tangle.getValue("stroke_width"));
                    rocky.graphics_draw_arc(
                            ctx, rect,
                            tangle.getValue("oval_scale_mode"),
                            rocky.DEG_TO_TRIGANGLE(tangle.getValue("angle_start")), /* angle_start */
                            rocky.DEG_TO_TRIGANGLE(tangle.getValue("angle_end"))  /* angle_end */
                    );
                }
            });
        </script>
    </div>

</body>
</html>
